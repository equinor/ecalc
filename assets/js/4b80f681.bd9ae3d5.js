"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["2145"],{67445:function(e,s,r){r.r(s),r.d(s,{metadata:()=>n,default:()=>m,frontMatter:()=>i,contentTitle:()=>a,toc:()=>d,assets:()=>l});var n=JSON.parse('{"id":"about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model_with_multiple_streams_and_pressures","title":"Variable speed compressor train model with multiple streams and pressures","description":"This compressor type is a more advanced model which covers compressor trains which may have multiple ingoing and/or outgoing streams and/or extra pressure controls. The figure below is an example of what this compression train could look like.","source":"@site/docs/about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model_with_multiple_streams_and_pressures.md","sourceDirName":"about/modelling/setup/models/compressor_modelling/compressor_models_types","slug":"/about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model_with_multiple_streams_and_pressures","permalink":"/ecalc/docs/about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model_with_multiple_streams_and_pressures","draft":false,"unlisted":false,"editUrl":"https://github.com/equinor/ecalc/tree/main/documentation/docs/about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model_with_multiple_streams_and_pressures.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Variable speed compressor train model with multiple streams and pressures","sidebar_position":4},"sidebar":"about","previous":{"title":"Variable speed compressor train","permalink":"/ecalc/docs/about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model"},"next":{"title":"Fixed speed pressure control","permalink":"/ecalc/docs/about/modelling/setup/models/compressor_modelling/fixed_speed_pressure_control/"}}'),t=r(74848),o=r(28453);let i={title:"Variable speed compressor train model with multiple streams and pressures",sidebar_position:4},a,l={},d=[{value:"Format",id:"format",level:2},{value:"Keyword usage",id:"keyword-usage",level:2},{value:"INTERSTAGE_PRESSURE_CONTROL",id:"interstage_pressure_control",level:3},{value:"Fixed pressure control",id:"fixed-pressure-control",level:3},{value:"Example",id:"example",level:2}];function c(e){let s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"This compressor type is a more advanced model which covers compressor trains which may have multiple ingoing and/or outgoing streams and/or extra pressure controls. The figure below is an example of what this compression train could look like."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Compressor train with multiple streams and pressures",src:r(19139).A+"",width:"1475",height:"659"})}),"\n",(0,t.jsx)(s.h2,{id:"format",children:"Format"}),"\n",(0,t.jsxs)(s.p,{children:["The model is defined under the main keyword ",(0,t.jsx)(s.a,{href:"/ecalc/docs/about/references/MODELS",children:"MODELS"})," in the format:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"MODELS:\n  - NAME: <model name>\n    TYPE: VARIABLE_SPEED_COMPRESSOR_TRAIN_MULTIPLE_STREAMS_AND_PRESSURES\n    # All streams defined ahead of stage\n    # Default outlet stream after last stage should not be defined\n    STREAMS: # All inlet streams must have fluid models with the same eos model\n      - NAME: <name of stream 1>\n        TYPE: INGOING\n        FLUID_MODEL: <reference to fluid model, must be defined in MODELS>\n      - NAME: <name of stream 2>\n        TYPE: INGOING\n        FLUID_MODEL: <reference to fluid model, must be defined in MODELS>\n      - ...\n      - NAME: <name of stream N>\n        TYPE: OUTGOING # NB: No fluid definition for outgoing streams!\n    STAGES:\n      - INLET_TEMPERATURE: <inlet temperature in Celsius for stage>\n        COMPRESSOR_CHART: <reference to a compressor chart model defined in MODELS>\n        STREAM: <reference stream from STREAMS. Needs to be an INGOING type stream.>\n        CONTROL_MARGIN: <Surge control margin for the compressor stage. Set to 0.0 if no margin>\n        PRESSURE_DROP_AHEAD_OF_STAGE: <Pressure drop before compression stage [in bar]>\n        CONTROL_MARGIN_UNIT: <FRACTION or PERCENTAGE, default is PERCENTAGE>\n      - ...\n      - INLET_TEMPERATURE: <inlet temperature in Celsius for stage>\n        COMPRESSOR_CHART: <reference to a compressor chart model defined in MODELS>\n        STREAM: <Optional>\n        - <reference stream from STREAMS for one in- or outgoing stream. Optional>\n        - <reference stream from STREAMS for another in- or outgoing stream. Optional>\n        CONTROL_MARGIN: <Surge control margin for the compressor stage. Set to 0.0 if no margin>\n        CONTROL_MARGIN_UNIT: <FRACTION or PERCENTAGE, default is PERCENTAGE>\n        PRESSURE_DROP_AHEAD_OF_STAGE: <Pressure drop before compression stage [in bar]>\n        INTERSTAGE_CONTROL_PRESSURE:\n          UPSTREAM_PRESSURE_CONTROL: <pressure control>\n          DOWNSTREAM_PRESSURE_CONTROL: <pressure control>\n      - ...\n      - INLET_TEMPERATURE: <inlet temperature in Celsius for stage>\n        COMPRESSOR_CHART: <reference to a compressor chart model defined in MODELS>\n        CONTROL_MARGIN: <Surge control margin for the compressor stage. Set to 0.0 if no margin>\n        CONTROL_MARGIN_UNIT: <FRACTION or PERCENTAGE, default is PERCENTAGE>\n        PRESSURE_DROP_AHEAD_OF_STAGE: <Pressure drop before compression stage [in bar]>\n      - ...\n    MAXIMUM_POWER: <Optional constant MW maximum power the compressor train can require>\n"})}),"\n",(0,t.jsx)(s.h2,{id:"keyword-usage",children:"Keyword usage"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"/ecalc/docs/about/references/STREAMS",children:"STREAMS"})," is a list of all in- and out-going streams for the compressor train."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"The same equation of state (EOS) must be used for each INGOING stream fluid models"}),"\n",(0,t.jsxs)(s.li,{children:["OUTGOING fluid models ",(0,t.jsx)(s.strong,{children:"cannot"})," be specified."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"STAGES"})," is a list of all the stages in the compressor train."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"For each stage, a temperature in Celsius must be defined. It\nis assumed that the gas is cooled down to this temperature ahead of the compression at this stage."}),"\n",(0,t.jsx)(s.li,{children:"A reference to a\ncompressor chart needs to be specified for each stage."}),"\n",(0,t.jsxs)(s.li,{children:["For the first stage, it is required to have ",(0,t.jsx)(s.strong,{children:"at least"})," one stream of INGOING type. In addition, ",(0,t.jsx)(s.code,{children:"INTERSTAGE_CONTROL_PRESSURE"})," cannot be used on the first stage."]}),"\n",(0,t.jsx)(s.li,{children:"Stages 2, ..., N may have a stream defined and it may be in- or outgoing. If an ingoing stream is defined, this stream\nwill be mixed with the outlet stream of the previous stage, obtaining a composition for the mixed fluid based on the\nmolar fractions and rate for each of them. If an outgoing stream is defined, the rate continuing to the next stage, will\nbe subtracted the rate of the outgoing stream."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"PRESSURE_DROP_AHEAD_OF_STAGE"})," is optional, but if defined it will reduce the inlet pressure of that particular stage by a fixed value.\nAs of now, only a single value is supported - i.e. a time series cannot be used here."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"CONTROL_MARGIN"})," is a surge control margin, see ",(0,t.jsx)(s.a,{href:"/ecalc/docs/about/modelling/setup/models/compressor_modelling/compressor_charts/",children:"Surge control margin for variable speed compressor chart"}),". This keyword is required for each stage."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"CONTROL_MARGIN_UNIT"})," is the unit of the surge control margin. This keyword is required for each stage."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)("span",{className:"changed-from-version",children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Changed in version 9.0:"})," CONTROL_MARGIN and CONTROL_MARGIN_UNIT are required"]})}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(s.h3,{id:"interstage_pressure_control",children:"INTERSTAGE_PRESSURE_CONTROL"}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"INTERSTAGE_CONTROL_PRESSURE"})," may be specified for one (only one!) of the stages 2, ..., N. It may ",(0,t.jsx)(s.strong,{children:"not"})," be specified for the first stage. See ",(0,t.jsx)(s.a,{href:"/ecalc/docs/about/references/INTERSTAGE_CONTROL_PRESSURE",children:"INTERSTAGE_CONTROL_PRESSURE"})," for more usage details"]})}),"\n",(0,t.jsxs)(s.p,{children:["This is optional but essentially when this is specified the compression train is split into two parts - before and after the ",(0,t.jsx)(s.code,{children:"INTERSTAGE_CONTROL_PRESSURE"}),". As all rates and pressures (suction, discharge and interstage) are known, each side of the compression train can be solved independently."]}),"\n",(0,t.jsx)(s.p,{children:"Thus, given this, the rotational speed needed to match the suction and interstage pressure can be found. This speed will be for the first section of the compression train. The same is done for the second part of the train, only here the rotational speed is found to match the interstage and discharge pressure, for the given rates."}),"\n",(0,t.jsxs)(s.p,{children:["The highest speed between the first and second parts of the train is then taken as the rotational speed of the compression train.\nThis speed will essentially be needed to meet the most demanding pressure interval.\nThe section with the lower rotational speed must then be run with a form of pressure control (see ",(0,t.jsx)(s.a,{href:"/ecalc/docs/about/references/UPSTREAM_PRESSURE_CONTROL",children:"UPSTREAM_PRESSURE_CONTROL"}),"/",(0,t.jsx)(s.a,{href:"/ecalc/docs/about/references/DOWNSTREAM_PRESSURE_CONTROL",children:"DOWNSTREAM_PRESSURE_CONTROL"}),")."]}),"\n",(0,t.jsx)(s.p,{children:"In a given simulation, the section of the compression train that requires either upstream or downstream pressure control is not fixed. This means that for different time steps, the part of the train with the highest rotational speed is not set to either the first or second section. Thus, both pressure control methods must be specified but only one of them will be used for each time step."}),"\n",(0,t.jsx)(s.p,{children:"Technically, the INTERSTAGE_PRESSURE_CONTROL may be set independent of where the streams are defined. I.e. it may be\ndefined at a stage where there is an in- or out-going stream defined, or at a stage where there is no defined stream.\nIn reality, the INTERSTAGE_PRESSURE_CONTROL is linked to a stream, for example an outgoing stream for export where the\nexport pressure is defined, and where the rest of the gas continues through the compressor train for example for\ninjection at a higher pressure."}),"\n",(0,t.jsx)(s.h3,{id:"fixed-pressure-control",children:"Fixed pressure control"}),"\n",(0,t.jsx)(s.p,{children:"The available pressure controls are"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"DOWNSTREAM_CHOKE"}),"\n",(0,t.jsx)(s.li,{children:"UPSTREAM_CHOKE"}),"\n",(0,t.jsx)(s.li,{children:"INDIVIDUAL_ASV_PRESSURE"}),"\n",(0,t.jsx)(s.li,{children:"INDIVIDUAL_ASV_RATE"}),"\n",(0,t.jsx)(s.li,{children:"COMMON_ASV"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"The sub-train where the pressure control is used, is now modeling wise equal to a single speed train as the speed is\ndetermined from the other sub-train. The inlet and outlet pressures for a sub-train, may be either the suction pressure\nand the interstage control pressure or interstage control pressure and the discharge pressure, depending on which sub\npart governs the speed of the full train."}),"\n",(0,t.jsxs)(s.p,{children:["See ",(0,t.jsx)(s.a,{href:"/ecalc/docs/about/modelling/setup/models/compressor_modelling/fixed_speed_pressure_control/",children:"FIXED PRESSURE CONTROL"})," for more details."]}),"\n",(0,t.jsx)(s.h2,{id:"example",children:"Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"MODELS:\n  - NAME: compressor_model\n    TYPE: VARIABLE_SPEED_COMPRESSOR_TRAIN_MULTIPLE_STREAMS_AND_PRESSURES\n    STREAMS: \n      - NAME: 1_stage_inlet\n        TYPE: INGOING\n        FLUID_MODEL: fluid_model_1\n      - NAME: 3_stage_inlet\n        TYPE: INGOING\n        FLUID_MODEL: fluid_model_2\n      - NAME: 2_stage_outlet\n        TYPE: OUTGOING\n    STAGES:\n      - COMPRESSOR_CHART: 1_stage_chart\n        INLET_TEMPERATURE: 20\n        CONTROL_MARGIN: 0.0\n        CONTROL_MARGIN_UNIT: PERCENTAGE\n        STREAM: \n          - 1_stage_inlet\n      - COMPRESSOR_CHART: 2_stage_chart \n        INLET_TEMPERATURE: 30\n        CONTROL_MARGIN: 0.0\n        CONTROL_MARGIN_UNIT: PERCENTAGE\n      - COMPRESSOR_CHART: 3_stage_chart \n        INLET_TEMPERATURE: 35\n        CONTROL_MARGIN: 0.0\n        CONTROL_MARGIN_UNIT: PERCENTAGE\n        STREAM: \n          - 2_stage_outlet\n          - 3_stage_inlet\n        INTERSTAGE_CONTROL_PRESSURE:\n          UPSTREAM_PRESSURE_CONTROL: INDIVIDUAL_ASV_RATE  #1st and 2nd stage\n          DOWNSTREAM_PRESSURE_CONTROL: INDIVIDUAL_ASV_RATE #3rd and 4th stage\n      - COMPRESSOR_CHART: 4_stage_chart \n        INLET_TEMPERATURE: 15\n        CONTROL_MARGIN: 0.0\n        CONTROL_MARGIN_UNIT: PERCENTAGE\n"})})]})}function m(e={}){let{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},19139:function(e,s,r){r.d(s,{A:()=>n});let n=r.p+"assets/images/process_compressor_train_multiple_streams-415751902a6078520845f70740eaa1af.png"},28453:function(e,s,r){r.d(s,{R:()=>i,x:()=>a});var n=r(96540);let t={},o=n.createContext(t);function i(e){let s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);