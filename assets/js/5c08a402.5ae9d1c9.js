"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["6243"],{59947:function(e,n,i){i.r(n),i.d(n,{metadata:()=>t,default:()=>h,frontMatter:()=>r,contentTitle:()=>l,toc:()=>d,assets:()=>a});var t=JSON.parse('{"id":"about/migration_guides/v8-1_to_v8-2","title":"v8.1 to v8.2","description":"v8.1 to v8.2 migration","source":"@site/docs/about/migration_guides/v8-1_to_v8-2.md","sourceDirName":"about/migration_guides","slug":"/about/migration_guides/v8-1_to_v8-2","permalink":"/ecalc/docs/about/migration_guides/v8-1_to_v8-2","draft":false,"unlisted":false,"editUrl":"https://github.com/equinor/ecalc/tree/main/documentation/docs/about/migration_guides/v8-1_to_v8-2.md","tags":[],"version":"current","sidebarPosition":-2,"frontMatter":{"title":"v8.1 to v8.2","description":"v8.1 to v8.2 migration","sidebar_position":-2},"sidebar":"about","previous":{"title":"v8.2 to v8.3","permalink":"/ecalc/docs/about/migration_guides/v8-2_to_v8-3"},"next":{"title":"v8 to v8.1","permalink":"/ecalc/docs/about/migration_guides/v8-0_to_v81"}}'),s=i(74848),o=i(28453);let r={title:"v8.1 to v8.2",description:"v8.1 to v8.2 migration",sidebar_position:-2},l="v8.1 to v8.2",a={},d=[{value:"Modelling",id:"modelling",level:2},{value:"YAML",id:"yaml",level:3},{value:"LTP",id:"ltp",level:4},{value:"Result",id:"result",level:2},{value:"Operational settings used is now 1-based",id:"operational-settings-used-is-now-1-based",level:3},{value:"Resampling of rates changed from forward filling to average rates",id:"resampling-of-rates-changed-from-forward-filling-to-average-rates",level:3},{value:"LTP .tsv file",id:"ltp-tsv-file",level:3},{value:"STP .tsv file",id:"stp-tsv-file",level:3},{value:"Emissions, structure and order",id:"emissions-structure-and-order",level:3},{value:"Behaviour",id:"behaviour",level:2},{value:"Conditions",id:"conditions",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"v81-to-v82",children:"v8.1 to v8.2"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#modelling",children:"Model changes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#result",children:"Result changes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#behaviour",children:"Behaviour"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"modelling",children:"Modelling"}),"\n",(0,s.jsx)(n.h3,{id:"yaml",children:"YAML"}),"\n",(0,s.jsx)(n.h4,{id:"ltp",children:"LTP"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Two new consumer categories are added: ",(0,s.jsx)(n.a,{href:"../references/CATEGORY",children:(0,s.jsx)(n.code,{children:"HEATER"})})," and ",(0,s.jsx)(n.a,{href:"../references/CATEGORY",children:(0,s.jsx)(n.code,{children:"BOILER"})})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"result",children:"Result"}),"\n",(0,s.jsx)(n.h3,{id:"operational-settings-used-is-now-1-based",children:"Operational settings used is now 1-based"}),"\n",(0,s.jsxs)(n.p,{children:["Consumer systems will now refer to the first operational setting as ",(0,s.jsx)(n.strong,{children:"1"})," instead of ",(0,s.jsx)(n.strong,{children:"0"}),". ",(0,s.jsx)(n.strong,{children:"0"}),' means that "No setting was used", indicating that none of the operational settings was able to handle the stream. This will make it easier for users to find the corresponding operational setting that is/was active for the different timesteps.']}),"\n",(0,s.jsx)(n.h3,{id:"resampling-of-rates-changed-from-forward-filling-to-average-rates",children:"Resampling of rates changed from forward filling to average rates"}),"\n",(0,s.jsxs)(n.p,{children:["All calculations are performed on a global time vector, which is the union of all dates found in the\ninput resource files (csv files) where ",(0,s.jsx)(n.a,{href:"../references/INFLUENCE_TIME_VECTOR",children:"INFLUENCE_TIME_VECTOR"})," is set to\nTrue, dates found in the eCalc model yaml-file (temporal models), and dates in the requested output frequency."]}),"\n",(0,s.jsx)(n.p,{children:"If the global time vector and the dates in the requested output frequency does not coincide fully, a resampling of the\nresults needs to be performed. Previously this was done by simply picking the first\navailable rate in the time interval (forward filling). The rates are thought to be constant in a period between two\ndates, hence the forward filling will disconnect the rates and the cumulative volumes. This has now been changed to\ncalculating the average rate from all dates in the global time vector within a date range in the requested output\nfrequency, to keep the rate and cumulative consistent with each other. This average will take into\naccount the lengths of the periods and the regularity within each period. The figure below shows a comparison of how the\nresampling would previously have been done compared to how it is done now when making quarterly output from monthly results."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(25871).A+"",width:"1790",height:"1116"})}),"\n",(0,s.jsx)(n.p,{children:"TLDR; this change will make it possible to use the rate output data (rate from a point in time) from eCalc correctly."}),"\n",(0,s.jsx)(n.h3,{id:"ltp-tsv-file",children:"LTP .tsv file"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Column Total CO2 is removed from LTP output (both for fixed & mobile installations)"}),"\n",(0,s.jsxs)(n.li,{children:["Add relevant columns in ltp-file for the two new consumer categories ",(0,s.jsx)(n.a,{href:"../references/CATEGORY",children:(0,s.jsx)(n.code,{children:"HEATER"})})," and ",(0,s.jsx)(n.a,{href:"../references/CATEGORY",children:(0,s.jsx)(n.code,{children:"BOILER"})})]}),"\n",(0,s.jsx)(n.li,{children:"Re-order some of the columns in the ltp-file, for more logical order"}),"\n",(0,s.jsxs)(n.li,{children:["Turbine-columns are now filtered on the two consumer categories ",(0,s.jsx)(n.a,{href:"../references/CATEGORY",children:(0,s.jsx)(n.code,{children:"TURBINE-GENERATOR"})})," and ",(0,s.jsx)(n.a,{href:"../references/CATEGORY",children:(0,s.jsx)(n.code,{children:"GAS-DRIVEN-COMPRESSOR"})}),", as it is no longer only turbines that are consumers of FUEL-GAS"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"stp-tsv-file",children:"STP .tsv file"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Report CO2 emissions for both fixed- and mobile installations"}),"\n",(0,s.jsx)(n.li,{children:"Report CH4 emissions for fixed installations"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"emissions-structure-and-order",children:"Emissions, structure and order"}),"\n",(0,s.jsx)(n.p,{children:"The JSON result file has changed format for emissions. Emissions were previously listed in a list, but is now listed in a map:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'    # This is old\n    "emissions":\n      [\n        {\n          "name": "co2"\n          ...\n'})}),"\n",(0,s.jsx)(n.p,{children:"to"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'    # This is new\n    "emissions":\n      {\n        "co2":\n          {\n            "name": "co2"\n            ...\n'})}),"\n",(0,s.jsx)(n.p,{children:"This will/may also affect the order of which emissions are presented in the result file, but should from now on be consistent."}),"\n",(0,s.jsx)(n.h2,{id:"behaviour",children:"Behaviour"}),"\n",(0,s.jsx)(n.h2,{id:"conditions",children:"Conditions"}),"\n",(0,s.jsxs)(n.p,{children:["eCalc will now consistently NOT evaluate and run calculations if a ",(0,s.jsx)(n.a,{href:"../references/CONDITION",children:"CONDITION"}),' is not fulfilled. Conditions can be set on most energy consumers, to indicate whether the consumer is active or not at a given timestep. Previously the consumer was evaluated even though a condition was not fulfilled to reflect "what would have happened if it was active". However this has proven to be difficult for users to understand and remember when the overall model result is being evaluated and analyzed. In order to prevent user errors, we have decided to consistently ',(0,s.jsx)(n.strong,{children:"NOT"})," evaluate a consumer for timesteps where it is disabled (conditions evaluated to true)."]})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},25871:function(e,n,i){i.d(n,{A:()=>t});let t=i.p+"assets/images/changed_rate_resampling-1618c246583304921e59eced813219f2.png"},28453:function(e,n,i){i.d(n,{R:()=>r,x:()=>l});var t=i(96540);let s={},o=t.createContext(s);function r(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);