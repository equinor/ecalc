"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["3679"],{23633:function(e,r,n){n.r(r),n.d(r,{metadata:()=>s,default:()=>h,frontMatter:()=>o,contentTitle:()=>a,toc:()=>l,assets:()=>c});var s=JSON.parse('{"id":"about/modelling/setup/models/compressor_modelling/compressor_charts/index","title":"Compressor chart","description":"Introduction to compressor chart","source":"@site/docs/about/modelling/setup/models/compressor_modelling/compressor_charts/index.md","sourceDirName":"about/modelling/setup/models/compressor_modelling/compressor_charts","slug":"/about/modelling/setup/models/compressor_modelling/compressor_charts/","permalink":"/ecalc/docs/about/modelling/setup/models/compressor_modelling/compressor_charts/","draft":false,"unlisted":false,"editUrl":"https://github.com/equinor/ecalc/tree/main/documentation/docs/about/modelling/setup/models/compressor_modelling/compressor_charts/index.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Compressor chart","sidebar_position":2,"description":"Introduction to compressor chart"},"sidebar":"about","previous":{"title":"Compressor modelling","permalink":"/ecalc/docs/about/modelling/setup/models/compressor_modelling/"},"next":{"title":"Compressor train types","permalink":"/ecalc/docs/about/modelling/setup/models/compressor_modelling/compressor_models_types/"}}'),i=n(74848),t=n(28453);let o={title:"Compressor chart",sidebar_position:2,description:"Introduction to compressor chart"},a="Compressor chart",c={},l=[{value:"User defined single speed compressor chart",id:"user-defined-single-speed-compressor-chart",level:2},{value:"Format",id:"format",level:3},{value:"Example",id:"example",level:3},{value:"Format",id:"format-1",level:4},{value:"Example",id:"example-1",level:4},{value:"User defined variable speed compressor chart",id:"user-defined-variable-speed-compressor-chart",level:2},{value:"Format",id:"format-2",level:3},{value:"Example",id:"example-2",level:3},{value:"Format",id:"format-3",level:4},{value:"Example",id:"example-3",level:4},{value:"Generic compressor chart with predefined design point",id:"generic-compressor-chart-with-predefined-design-point",level:2},{value:"Format",id:"format-4",level:3},{value:"Example",id:"example-4",level:3},{value:"Example",id:"example-5",level:3},{value:"Generic compressor chart with design point calculated from input data",id:"generic-compressor-chart-with-design-point-calculated-from-input-data",level:2},{value:"Format",id:"format-5",level:3},{value:"Example",id:"example-6",level:3},{value:"Surge control margin for variable speed compressor chart",id:"surge-control-margin-for-variable-speed-compressor-chart",level:2},{value:"Format",id:"format-6",level:3}];function d(e){let r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"compressor-chart",children:"Compressor chart"})}),"\n",(0,i.jsx)(r.p,{children:"The compressor chart is used to set up a model of each compressor. eCalc\u2122 currently support four ways to set up a\ncompressor chart"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Predefined single speed chart"}),"\n",(0,i.jsx)(r.li,{children:"Predefined variable speed chart"}),"\n",(0,i.jsx)(r.li,{children:"Generic compressor chart with a specified design point"}),"\n",(0,i.jsx)(r.li,{children:"Generic compressor chart which is automatically adjusted to have capacity for the input data"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"user-defined-single-speed-compressor-chart",children:"User defined single speed compressor chart"}),"\n",(0,i.jsxs)(r.p,{children:["The single speed chart type allows a single compressor curve for one speed, using the keyword ",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/CURVE",children:"CURVE"})]}),"\n",(0,i.jsx)(r.h3,{id:"format",children:"Format"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: <name of chart, for reference>\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: SINGLE_SPEED\n    UNITS:\n      RATE: <rate unit, currently only AM3_PER_HOUR supported>\n      HEAD: <polytropic head unit, M, KJ_PER_KG, JOULE_PER_KG supported>\n      EFFICIENCY: <polytropic efficiency unit, FRACTION and PERCENTAGE.>\n    CURVE:\n      - SPEED: <shaft speed for this curve, a number>\n        RATE: <list of rate values for this chart curve>\n        HEAD: <list of polytropic head values for this chart curve>\n        EFFICIENCY: <list of polytropic efficiency values for this chart curve>\n"})}),"\n",(0,i.jsx)(r.h3,{id:"example",children:"Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: predefined_single_speed_compressor_chart\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: SINGLE_SPEED\n    UNITS:\n      RATE: AM3_PER_HOUR\n      HEAD: M\n      EFFICIENCY: FRACTION\n    CURVE:\n      - SPEED: 7500\n        RATE: [2900, 3503, 4002, 4595.0]\n        HEAD: [8412.9, 7996, 7363, 6127]\n        EFFICIENCY: [0.72, 0.75, 0.74, 0.70]\n"})}),"\n",(0,i.jsxs)(r.admonition,{title:"Tip",type:"tip",children:[(0,i.jsx)(r.p,{children:"It is also possible to input single speed compressor chart as csv file."}),(0,i.jsx)(r.h4,{id:"format-1",children:"Format"}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"CURVE:\n  FILE: <csv file with single speed compressor chart>\n"})}),(0,i.jsx)(r.h4,{id:"example-1",children:"Example"}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"CURVE:\n  FILE: compressor_chart_single_speed.csv\n"})})]}),"\n",(0,i.jsx)(r.h2,{id:"user-defined-variable-speed-compressor-chart",children:"User defined variable speed compressor chart"}),"\n",(0,i.jsxs)(r.p,{children:["The variable speed chart type allows a fully defined compressor chart with data for two or more speeds, using the keyword ",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/CURVES",children:"CURVES"}),". The upper and\nlower speed curves will be interpreted as the speed capacity limits for the chart.\nWhilst the lowest rate points on each of the upper and lower speed curves will define the minimum flow line for the compressor."]}),"\n",(0,i.jsxs)(r.p,{children:["Additionally, there is functionality to define a control line which behaves as an alternate to the minimum flow line. This means that your input will be 'cropped' to only include points to the right of the control line - modelling recirculation (",(0,i.jsx)(r.code,{children:"ASV"}),") from the correct control line.\nSee ",(0,i.jsx)(r.code,{children:"Surge control margin for variable speed compressor chart"})," for more details."]}),"\n",(0,i.jsxs)(r.p,{children:["The figure shows an example of a user defined variable speed compressor chart, showing the individual curves for each speed,\nthe surge line, the control margin line, and the stonewall.\n",(0,i.jsx)(r.img,{src:n(53122).A+"",width:"3199",height:"1613"})]}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsx)(r.p,{children:"Using a variable speed compressor chart as input essentially does the same as if a process simulation tool was used to\ncreate an energy function. It has been verified to be close to identical to Unisim within 2% accuracy (smaller\ndifferences in density arise from differences in PVT assumptions and calculations)."})}),"\n",(0,i.jsx)(r.h3,{id:"format-2",children:"Format"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: <name of chart, for reference>\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: VARIABLE_SPEED\n    UNITS:\n      RATE: <rate unit, currently only AM3_PER_HOUR supported>\n      HEAD: <polytropic head unit, M, KJ_PER_KG, JOULE_PER_KG supported>\n      EFFICIENCY: <polytropic efficiency unit, FRACTION and PERCENTAGE.>\n    CURVES:\n      - SPEED: <shaft speed for this curve, a number>\n        RATE: <list of rate values for this chart curve>\n        HEAD: <list of polytropic head values for this chart curve>\n        EFFICIENCY: <list of polytropic efficiency values for this chart curve>\n      - SPEED: <shaft speed for this curve, a number>\n        RATE: <list of rate values for this chart curve>\n        HEAD: <list of polytropic head values for this chart curve>\n        EFFICIENCY: <list of polytropic efficiency values for this chart curve>\n      - ... and so forth for all chart curves. Minimum two curves needed.\n"})}),"\n",(0,i.jsx)(r.h3,{id:"example-2",children:"Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: predefined_variable_speed_compressor_chart\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: VARIABLE_SPEED\n    UNITS:\n      RATE: AM3_PER_HOUR\n      HEAD: M\n      EFFICIENCY: FRACTION\n    CURVES:\n      - SPEED: 7500\n        RATE: [2900, 3503, 4002, 4595.0]\n        HEAD: [8412.9, 7996, 7363, 6127]\n        EFFICIENCY: [0.72, 0.75, 0.74, 0.70]\n      - SPEED: 9886\n        RATE: [3708, 4502, 4993.6, 5507, 5924]\n        HEAD: [13845, 13182, 12425, 11276, 10054]\n        EFFICIENCY: [ 0.72, 0.75, 0.748, 0.73, 0.70]\n      - SPEED: 10767\n        RATE: [4052, 4500, 4999, 5492, 6000, 6439,]\n        HEAD: [16447, 16081, 15546, 14640, 13454, 11973,]\n        EFFICIENCY: [0.72, 0.73, 0.74, 0.74, 0.72, 0.70]\n"})}),"\n",(0,i.jsxs)(r.admonition,{title:"Tip",type:"tip",children:[(0,i.jsx)(r.p,{children:"It is also possible to input variable speed compressor chart as csv file."}),(0,i.jsx)(r.h4,{id:"format-3",children:"Format"}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"CURVES:\n  FILE: <csv file with variable speed compressor chart>\n"})}),(0,i.jsx)(r.h4,{id:"example-3",children:"Example"}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"CURVES:\n  FILE: compressor_chart_variable_speed.csv\n"})})]}),"\n",(0,i.jsx)(r.h2,{id:"generic-compressor-chart-with-predefined-design-point",children:"Generic compressor chart with predefined design point"}),"\n",(0,i.jsx)(r.p,{children:'The generic compressor chart used is an "average" chart of compressors used on the NCS and cannot be expected to be equal to\nthe actual chart for a compressor which has been designed and delivered. However, it can be a good first estimation of\nhow a chart may be for a future process not yet in the design phase.'}),"\n",(0,i.jsxs)(r.p,{children:["This chart will not replace any future compressor curves and it may not be accurate in comparison to the final compressor curve; however, it is a good method to capture the major effects (such as  ",(0,i.jsx)(r.code,{children:"ASV"}),' (anti-surge valve) recirculation).\nWith this method it is possible to view how a "typical" compressor curve would react a large spread in the data set. If the design point is set within the middle of the data spread, points with rates lower than the minimum flow will have some recirculation; whilst, too high or unrealistic rates will not be solved. This is an essential difference in comparison to the generic chart with its design point calculated from input data (which is covered in ',(0,i.jsx)(r.code,{children:"Generic compressor chart with design point calculated from input data"}),"), which will shift the entire compressor curve to solve for even the highest rate and head points."]}),"\n",(0,i.jsx)(r.p,{children:"Unified generic compressor chart:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{src:n(61486).A+"",width:"1048",height:"729"})}),"\n",(0,i.jsxs)(r.p,{children:["The compressor chart is created by scaling the unified generic compressor chart in the figure above with a\n",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/DESIGN_RATE",children:"DESIGN_RATE"})," and a ",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/DESIGN_HEAD",children:"DESIGN_HEAD"}),".\nThe generic compressor chart is currently accompanied by a fixed\n",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/POLYTROPIC_EFFICIENCY",children:"POLYTROPIC_EFFICIENCY"})," (polytropic efficiency\nvariations within the chart may be supported in the future)."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/UNITS",children:"UNITS"})," for the ",(0,i.jsx)(r.code,{children:"RATE"}),", ",(0,i.jsx)(r.code,{children:"HEAD"})," and ",(0,i.jsx)(r.code,{children:"EFFICIENCY"})," must also be defined. Note that\nthe only rate unit available here is ",(0,i.jsx)(r.em,{children:"am3/hr"})," which is NOT EQUAL to ",(0,i.jsx)(r.em,{children:"Sm3/hr"}),". The units ",(0,i.jsx)(r.em,{children:"am3/hr"})," refers to the\nvolumetric rate at inlet conditions (inlet pressure and temperature), and it will differ from the inputted standard\nrates due to the difference in density. The design polytropic head is given in either ",(0,i.jsx)(r.em,{children:"kJ/kg"}),", ",(0,i.jsx)(r.em,{children:"m"})," or J/kg."]}),"\n",(0,i.jsx)(r.h3,{id:"format-4",children:"Format"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: <name of chart, for reference>\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: GENERIC_FROM_DESIGN_POINT\n    POLYTROPIC_EFFICIENCY: <polytropic efficiency of the compressor (fixed number)>\n    DESIGN_RATE: <design rate>\n    DESIGN_HEAD: <design polytropic head>\n    UNITS:\n      RATE: <rate unit, currently only AM3_PER_HOUR supported>\n      HEAD: <polytropic head unit, M, KJ_PER_KG, JOULE_PER_KG supported>\n      EFFICIENCY: <polytropic efficiency unit, FRACTION and PERCENTAGE.>\n"})}),"\n",(0,i.jsx)(r.h3,{id:"example-4",children:"Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: generic_from_design_point_compressor_chart\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: GENERIC_FROM_DESIGN_POINT\n    POLYTROPIC_EFFICIENCY: 0.75\n    DESIGN_RATE: 7000\n    DESIGN_HEAD: 50\n    UNITS:\n      RATE: AM3_PER_HOUR\n      HEAD: KJ_PER_KG\n      EFFICIENCY: FRACTION\n"})}),"\n",(0,i.jsxs)(r.p,{children:["For this method it is important to note that only ",(0,i.jsx)(r.code,{children:"Simplified variable speed compressor train model"})," is supported."]}),"\n",(0,i.jsx)(r.h3,{id:"example-5",children:"Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: generic_compression_train_design_point\n    TYPE: SIMPLIFIED_VARIABLE_SPEED_COMPRESSOR_TRAIN\n    FLUID_MODEL: sample_fluid\n    PRESSURE_CONTROL: UPSTREAM_CHOKE\n    COMPRESSOR_TRAIN:\n      STAGES:\n        - COMPRESSOR_CHART: generic_from_design_point_compressor_chart\n          INLET_TEMPERATURE: 30\n"})}),"\n",(0,i.jsx)(r.h2,{id:"generic-compressor-chart-with-design-point-calculated-from-input-data",children:"Generic compressor chart with design point calculated from input data"}),"\n",(0,i.jsx)(r.p,{children:"The generic chart from input is also based on the unified generic compressor chart:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{src:n(61486).A+"",width:"1048",height:"729"})}),"\n",(0,i.jsxs)(r.p,{children:["However, in this case the design point is not specified when setting up the model, instead it is estimated at run time and is entirely based on the inputted data set.\nAn algorithm is used to set a design point such that all the input data is within the capacity.\nEven if there is a large spread in the data, all data points will solve. High rate/head data points will just be covered by the curve; whilst low rate points outside the minimum flow point will have recirculation.\nThe generic compressor chart is currently accompanied by a fixed\n",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/POLYTROPIC_EFFICIENCY",children:"POLYTROPIC_EFFICIENCY"})," (polytropic efficiency\nvariations within the chart may be supported in the future)."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/references/UNITS",children:"UNITS"})," for the ",(0,i.jsx)(r.code,{children:"EFFICIENCY"})," must also be defined."]}),"\n",(0,i.jsxs)(r.p,{children:["This method has one major potential downside in comparison to the ",(0,i.jsx)(r.code,{children:"Generic compressor chart with predefined design point"}),'. As all data points will be covered by the compressor curve, if there is an extremely large or unrealistic head or rate value, the other more "normal" data points will be impacted and will either result in a large head adjustment (via upstream/downstream choking) or it will have a large recirculation rate. This has the potential to skew the entire data set solely due to one unrealistic data point.  Thus, if this generic chart is utilised it is important to make sure that unrealistic data is filtered out.']}),"\n",(0,i.jsx)(r.h3,{id:"format-5",children:"Format"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: <name of chart, for reference>\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: GENERIC_FROM_INPUT\n    POLYTROPIC_EFFICIENCY: <polytropic efficiency of the compressor (fixed number)>\n    UNITS:\n      EFFICIENCY: <polytropic efficiency unit, FRACTION and PERCENTAGE.>\n"})}),"\n",(0,i.jsx)(r.h3,{id:"example-6",children:"Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: generic_from_input_compressor_chart\n    TYPE: COMPRESSOR_CHART\n    CHART_TYPE: GENERIC_FROM_INPUT\n    POLYTROPIC_EFFICIENCY: 0.75\n    UNITS:\n      EFFICIENCY: FRACTION\n"})}),"\n",(0,i.jsx)(r.h2,{id:"surge-control-margin-for-variable-speed-compressor-chart",children:"Surge control margin for variable speed compressor chart"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{src:n(93162).A+"",width:"1048",height:"729"})}),"\n",(0,i.jsxs)(r.p,{children:["For a variable speed compressor chart it is possible to add a surge control margin. This is currently done by giving a\nfraction or percentage as input. The control margin is used to calculate the increase in minimum flow, i.e. as a percentage\nor fraction of the rate difference between minimum- and maximum flow, for the given speed. The increase in minimum\nflow is calculated individually for each speed curve. The corresponding head and efficiency values for the new minimum flow rate\nis found by interpolation along the speed curves. The same compressor chart can be used for multiple compressor stages,\nbut with different surge control margins. Hence, the surge control margin is defined when setting up the stages in a\n",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model",children:(0,i.jsx)(r.code,{children:"Variable speed compressor train model"})})," or ",(0,i.jsx)(r.a,{href:"/ecalc/docs/about/modelling/setup/models/compressor_modelling/compressor_models_types/variable_speed_compressor_train_model_with_multiple_streams_and_pressures",children:(0,i.jsx)(r.code,{children:"Variable speed compressor train model with multiple streams and pressures"})}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"format-6",children:"Format"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"MODELS:\n  - NAME: <model name>\n    TYPE: VARIABLE_SPEED_COMPRESSOR_TRAIN\n    FLUID_MODEL: <reference to fluid model, must be defined in [MODELS]\n    COMPRESSOR_TRAIN:\n      STAGES:\n        - INLET_TEMPERATURE: <inlet temperature in Celsius for stage>\n          COMPRESSOR_CHART: <reference to compressor chart model for first stage, must be defined in MODELS or FACILITY_INPUTS>\n          CONTROL_MARGIN: <Default value is zero>\n          CONTROL_MARGIN_UNIT: <FRACTION or PERCENTAGE, default is PERCENTAGE>\n"})})]})}function h(e={}){let{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},93162:function(e,r,n){n.d(r,{A:()=>s});let s=n.p+"assets/images/compressor_chart_surge_control_margin_line-98e32f3b0d5332a371ec4bb2dbc66da8.png"},61486:function(e,r,n){n.d(r,{A:()=>s});let s=n.p+"assets/images/generic_unified_compressor_chart-ba6f49b5df22923cfcbe4d5d2aa4525b.png"},53122:function(e,r,n){n.d(r,{A:()=>s});let s=n.p+"assets/images/variable_speed_compressor_chart-3363c0ba3fb148d87fb7af7b3163f6eb.png"},28453:function(e,r,n){n.d(r,{R:()=>o,x:()=>a});var s=n(96540);let i={},t=s.createContext(i);function o(e){let r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);